{% extends 'pages/base.html' %}
{% load static %}
{% block content %}
    <title>Wannabes</title>
    <!-- Content -->
    <div class="content">
        <!-- Animated -->
        <div class="animated fadeIn">
            <!-- Widgets  -->
            <div class="row">
                <div class="col-lg-3 col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <div class="stat-widget-five">
                                <div class="stat-icon dib flat-color-1">
                                    <img class="rounded-circle" src="{% static 'images/height.jpg' %}" alt="">
                                </div>
                                <div class="stat-content">
                                    <div class="text-left dib">
                                        <div class="stat-text"><span>{{ user.fitness_person_user.height }}</span> m
                                        </div>
                                        <div class="stat-heading">Height</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <div class="stat-widget-five">
                                <div class="stat-icon dib flat-color-2">
                                    <img class="rounded-circle" src="{% static 'images/weight.jpg' %}" alt="">
                                </div>
                                <div class="stat-content">
                                    <div class="text-left dib">
                                        <div class="stat-text"><span
                                                id="fitness-user-weight"
                                                class="count">{{ user.fitness_person_user.weight }}</span> kg
                                        </div>
                                        <div class="stat-heading">Weight</div>
                                        <button type="submit" class="btn btn-success waves-effect waves-light"
                                                data-toggle="modal"
                                                data-target="#edit-profile-modal">
                                            Edit Profile
                                        </button>
                                    </div>
                                    <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <div class="stat-widget-five">
                                <div class="stat-icon dib flat-color-3">
                                    <img class="rounded-circle" src="{% static 'images/calorie.jpg' %}" alt="">
                                </div>
                                <div class="stat-content">
                                    <div class="text-left dib">
                                        <div class="stat-text"><span
                                                class="count"
                                                id="daily_burned_calories">{{ daily_person.daily_burned_calories }}</span>
                                            cal
                                        </div>
                                        <div class="stat-heading">Calorie Burned</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <div class="stat-widget-five">
                                <div class="stat-icon dib flat-color-4">
                                    <img class="rounded-circle" src="{% static 'images/food.png' %}" alt="">
                                </div>
                                <div class="stat-content">
                                    <div class="text-left dib">
                                        <div class="stat-text"><span
                                                class="count"
                                                id="daily_calorie_intakes">{{ daily_person.daily_calorie_intakes }}</span>
                                            cal
                                        </div>
                                        <div class="stat-heading">Calorie Intake</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /Widgets -->
            <!--  Traffic  -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="box-title"><u>Weekly Track</u></h4>
                        </div>
                        <div class="row">
                            <div class="col-lg-8">
                                <div class="card-body">
                                    <!-- <canvas id="TrafficChart"></canvas>   -->
                                    <div id="traffic-chart" class="traffic-chart"></div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="card-body">
                                    <h4 class="box-title"><u>Daily Track</u></h4>
                                    <div class="progress-box progress-1">
                                        <h4 class="por-title">Calorie Intake</h4>
                                        <div class="por-txt" id="recommended-calorie-intakes">Recommended
                                            : {{ user.fitness_person_user.daily_required_calorie_intakes|floatformat:-2 }}
                                            cal
                                        </div>
                                        {% if daily_person.daily_calorie_intakes %}
                                            <div class="por-txt" id="progress-bar-calorie-intakes">Intake
                                                : {{ daily_person.daily_calorie_intakes|floatformat:-2 }} cal
                                            </div>
                                        {% else %}
                                            <div class="por-txt" id="progress-bar-calorie-intakes">Intake : 0 cal</div>
                                        {% endif %}
                                        <div class="progress mb-2" style="height: 5px;">
                                            <div class="progress-bar bg-flat-color-1" role="progressbar"
                                                 id="daily-calorie-intake-pbar"
                                                 style="width: calc({{ daily_person.daily_calorie_intakes }}% * 100 / {{ user.fitness_person_user.daily_required_calorie_intakes }}) ;"
                                                 aria-valuenow="{{ daily_person.daily_calorie_intake }}"
                                                 aria-valuemin="0"
                                                 aria-valuemax="{{ user.fitness_person_user.daily_required_calorie_intakes }}"></div>
                                        </div>
                                    </div>
                                    <div class="progress-box progress-2">
                                        <h4 class="por-title">Protein Intake</h4>
                                        <div class="por-txt" id="recommended-protein-intake">Recommended
                                            : {{ user.fitness_person_user.required_protein|floatformat:-2 }} gr
                                        </div>
                                        {% if daily_person.daily_protein_intake %}
                                            <div class="por-txt" id="progress-bar-protein-intake">Intake
                                                : {{ daily_person.daily_protein_intake|floatformat:-2 }} gr
                                            </div>
                                        {% else %}
                                            <div class="por-txt" id="progress-bar-protein-intake">Intake : 0 gr</div>
                                        {% endif %}
                                        <div class="progress mb-2" style="height: 5px;">
                                            <div class="progress-bar bg-flat-color-2" role="progressbar"
                                                 id="daily-protein-intake-pbar"
                                                 style="width: calc({{ daily_person.daily_protein_intake }}% * 100 / {{ user.fitness_person_user.required_protein }});"
                                                 aria-valuenow="{{ daily_person.daily_protein_intake }}"
                                                 aria-valuemin="0"
                                                 aria-valuemax="{{ user.fitness_person_user.required_protein }}"></div>
                                        </div>
                                    </div>
                                    <div class="progress-box progress-2">
                                        <h4 class="por-title">Fat Intake</h4>
                                        <div class="por-txt" id="recommended-fat-intake">Recommended
                                            : {{ user.fitness_person_user.required_fat|floatformat:-2 }}
                                            gr
                                        </div>
                                        {% if daily_person.daily_fat_intake %}
                                            <div class="por-txt" id="progress-bar-fat-intake">Intake
                                                : {{ daily_person.daily_fat_intake|floatformat:-2 }} gr
                                            </div>
                                        {% else %}
                                            <div class="por-txt" id="progress-bar-fat-intake">Intake : 0 gr</div>
                                        {% endif %}
                                        <div class="progress mb-2" style="height: 5px;">
                                            <div class="progress-bar bg-flat-color-3" role="progressbar"
                                                 id="daily-fat-pbar"
                                                 style="width: calc({{ daily_person.daily_fat_intake }}% * 100 / {{ user.fitness_person_user.required_fat }});"
                                                 aria-valuenow={{ daily_person.daily_fat_intake }} aria-valuemin="0"
                                                 aria-valuemax="{{ user.fitness_person_user.required_fat }}"></div>
                                        </div>
                                    </div>
                                    <div class="progress-box progress-2">
                                        <h4 class="por-title">Carbohydrate Intake</h4>
                                        <div class="por-txt" id="recommended-carbohydrate-intake">Recommended
                                            : {{ user.fitness_person_user.required_carbohydrate|floatformat:-2 }} gr
                                        </div>
                                        {% if daily_person.daily_carbohydrate_intake %}
                                            <div class="por-txt" id="progress-bar-carb-intake">Intake
                                                : {{ daily_person.daily_carbohydrate_intake|floatformat:-2 }}
                                                gr
                                            </div>
                                        {% else %}
                                            <div class="por-txt" id="progress-bar-carb-intake">Intake : 0 gr</div>
                                        {% endif %}
                                        <div class="progress mb-2" style="height: 5px;">
                                            <div class="progress-bar bg-flat-color-4" role="progressbar"
                                                 id="daily-carb-intake-pbar"
                                                 style="width: calc({{ daily_person.daily_carbohydrate_intake }}% * 100 / {{ user.fitness_person_user.required_carbohydrate }});"
                                                 aria-valuenow={{ daily_person.daily_carbohydrate_intake }} aria-valuemin="0"
                                                 aria-valuemax="{{ user.fitness_person_user.required_carbohydrate }}"></div>
                                        </div>
                                    </div>
                                </div> <!-- /.card-body -->
                            </div>
                        </div> <!-- /.row -->
                        <div class="card-body"></div>
                    </div>
                </div><!-- /# column -->
            </div>
            <!-- Orders -->
            <div class="user-infos">
                <div class="col-lg-12">
                    <div class="row">
                        <div class="col-lg-4">
                            <div class="card br-0">
                                <div class="card-body">
                                    <div class="chart-container ov-h">
                                        <div id="flotPie1" class="float-chart"></div>
                                    </div>
                                </div>
                            </div><!-- /.card -->
                        </div>
                        <div class="col-lg-4">
                            <div class="card bg-flat-color-3  ">
                                <div class="card-body">
                                    <!-- gender->0 means user is male , gender->1 means user is female -->
                                    {% if user.fitness_person_user.gender == 0 %}
                                        {% if user.fitness_person_user.body_fat_percentage < 6 %}
                                            <h5 class="card-title m-0  white-color " id="body-fat-percentage">Body fat
                                                percentage
                                                : {{ user.fitness_person_user.body_fat_percentage|floatformat:-2 }} ->
                                                Essential fat</h5>
                                        {% elif user.fitness_person_user.body_fat_percentage < 14 %}
                                            <h5 class="card-title m-0  white-color " id="body-fat-percentage">Body fat
                                                percentage
                                                : {{ user.fitness_person_user.body_fat_percentage|floatformat:-2 }} ->
                                                Athletes</h5>
                                        {% elif user.fitness_person_user.body_fat_percentage < 18 %}
                                            <h5 class="card-title m-0  white-color " id="body-fat-percentage">Body fat
                                                percentage
                                                : {{ user.fitness_person_user.body_fat_percentage|floatformat:-2 }} ->
                                                Fitness</h5>
                                        {% elif user.fitness_person_user.body_fat_percentage < 25 %}
                                            <h5 class="card-title m-0  white-color " id="body-fat-percentage">Body fat
                                                percentage
                                                : {{ user.fitness_person_user.body_fat_percentage|floatformat:-2 }} ->
                                                Acceptable</h5>
                                        {% else %}
                                            <h5 class="card-title m-0  white-color " id="body-fat-percentage">Body fat
                                                percentage
                                                : {{ user.fitness_person_user.body_fat_percentage|floatformat:-2 }} ->
                                                <strong>Obesity</strong></h5>
                                        {% endif %}
                                    {% elif user.fitness_person_user.gender == 1 %}
                                        {% if user.fitness_person_user.body_fat_percentage < 14 %}
                                            <h5 class="card-title m-0  white-color " id="body-fat-percentage">Body fat
                                                percentage
                                                : {{ user.fitness_person_user.body_fat_percentage|floatformat:-2 }} ->
                                                Essential fat</h5>
                                        {% elif user.fitness_person_user.body_fat_percentage < 21 %}
                                            <h5 class="card-title m-0  white-color " id="body-fat-percentage">Body fat
                                                percentage
                                                : {{ user.fitness_person_user.body_fat_percentage|floatformat:-2 }} ->
                                                Athletes</h5>
                                        {% elif user.fitness_person_user.body_fat_percentage < 25 %}
                                            <h5 class="card-title m-0  white-color " id="body-fat-percentage">Body fat
                                                percentage
                                                : {{ user.fitness_person_user.body_fat_percentage|floatformat:-2 }} ->
                                                Fitness</h5>
                                        {% elif user.fitness_person_user.body_fat_percentage < 32 %}
                                            <h5 class="card-title m-0  white-color " id="body-fat-percentage">Body fat
                                                percentage
                                                : {{ user.fitness_person_user.body_fat_percentage|floatformat:-2 }} ->
                                                Acceptable</h5>
                                        {% else %}
                                            <h5 class="card-title m-0  white-color " id="body-fat-percentage">Body fat
                                                percentage
                                                : {{ user.fitness_person_user.body_fat_percentage|floatformat:-2 }} ->
                                                <strong>Obesity</strong></h5>
                                        {% endif %}
                                    {% endif %}
                                </div>
                                <div class="card-body">
                                    {% if user.fitness_person_user.body_mass_index < 18.5 %}
                                        <h5 class="card-title mb-0 white-color " id="body-mass-index">Body mass index
                                            : {{ user.fitness_person_user.body_mass_index|floatformat:-2 }} ->
                                            Underweight</h5>
                                    {% elif user.fitness_person_user.body_mass_index < 25.0 %}
                                        <h5 class="card-title mb-0 white-color " id="body-mass-index">Body mass index
                                            : {{ user.fitness_person_user.body_mass_index|floatformat:-2 }} -> Healty
                                            Weight</h5>
                                    {% elif user.fitness_person_user.body_mass_index < 30.0 %}
                                        <h5 class="card-title mb-0 white-color " id="body-mass-index">Body mass index
                                            : {{ user.fitness_person_user.body_mass_index|floatformat:-2 }} -> <strong>Overweight</strong>
                                        </h5>
                                    {% else %}
                                        <h5 class="card-title mb-0 white-color " id="body-mass-index">Body mass index
                                            : {{ user.fitness_person_user.body_mass_index|floatformat:-2 }} -> <strong>Obese</strong>
                                        </h5>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div id="cellPaiChart" class="float-chart"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="card-title box-title">Exercise Program</h4>
                            <button type="submit" class="btn btn-success waves-effect waves-light" data-toggle="modal"
                                    data-target="#add-exercise-modal"><i class="fa fa-plus-square-o"></i> Add Exercise
                            </button>
                            <div class="card-content">
                                <div class="todo-list">
                                    <div class="tdl-holder">
                                        <div class="tdl-content" id="exercise-checkbox-div">
                                            <ul id="exercise-checkbox-list">
                                                {% for user_exercise in daily_exercise_program.userexercise_set.all %}
                                                    <li>
                                                        <label>
                                                            {% if user_exercise.exercise.exercise_type == 0 %}
                                                                <span><strong>{{ user_exercise.exercise.name }} | {{ user_exercise.duration }} min | {{ user_exercise.how_many_calorie_burn }} cal burned</strong></span>
                                                                <a href='{{ user_exercise.exercise.video_link }}'
                                                                   class="fa fa-pencil"></a>
                                                                <a href='#' class="fa fa-times" name="exercise"
                                                                   val="{{ user_exercise.id }}"></a>
                                                            {% elif user_exercise.exercise.exercise_type == 1 %}
                                                                <span><strong>{{ user_exercise.exercise.name }} | {{ user_exercise.set_number }}x{{ user_exercise.rep_number }} | {{ user_exercise.how_many_calorie_burn }} cal burned</strong></span>
                                                                <a href='{{ user_exercise.exercise.video_link }}'
                                                                   class="fa fa-pencil"></a>
                                                                <a href='#' class="fa fa-times" name="exercise"
                                                                   val="{{ user_exercise.id }}"></a>
                                                            {% endif %}
                                                        </label>
                                                    </li>
                                                {% endfor %}
                                            </ul>
                                        </div>
                                    </div>
                                </div> <!-- /.todo-list -->
                            </div>
                            <div class="modal fade none-border" id="edit-profile-modal">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                                &times;
                                            </button>
                                            <h4 class="modal-title"><strong>Edit Profile</strong></h4>
                                        </div>
                                        <div class="modal-body">
                                            <div class="form">
                                                <div class="form-group">
                                                    <label class="form-check-label"
                                                           id="weight-selection-label" for="weight-selection">
                                                        Weight
                                                    </label>
                                                    <input class="form-check-input" type="number" min="1"
                                                           step="1" name="weight-selection"
                                                           id="weight-selection" required>
                                                </div>
                                                <div class="form-group">
                                                    <label for="exampleFormControlSelect1">Your Goal</label>
                                                    <select class="form-control" id="purpose-of-use">
                                                        <option value="0">I want to keep my weight</option>
                                                        <option value="1">I want to lose weight</option>
                                                        <option value="2">I want to gain weight</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-default waves-effect"
                                                    data-dismiss="modal">Close
                                            </button>
                                            <button type="submit" id="edit-profile-save-button"
                                                    class="btn btn-success save-event waves-effect waves-light">Save
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="modal fade none-border" id="add-exercise-modal">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                                &times;
                                            </button>
                                            <h4 class="modal-title"><strong>Add New Exercise</strong></h4>
                                            <p>First choose exercise type then choose an exercise</p>
                                        </div>
                                        <div class="modal-body">
                                            <div class="col-lg-12">
                                                <div class="row">
                                                    <div class="col-lg-6">
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="radio"
                                                                   name="exampleRadios" id="cardio-radio" value="0"
                                                                   required>
                                                            <label class="form-check-label" for="exampleRadios1">
                                                                Cardio Exercise
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6">
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="radio"
                                                                   name="exampleRadios" id="weight-radio" value="1"
                                                                   required>
                                                            <label class="form-check-label" for="exampleRadios2">
                                                                Weight Exercise
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="row">
                                                    <select class="js-example-basic-single" name="exercise_selection"
                                                            id="exercise-selector" style="width: 450px">
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="row">
                                                    <div class="col-lg-3">
                                                        <label hidden class="form-check-label"
                                                               id="duration-selection-label" for="duration-selection">
                                                            Duration
                                                        </label>
                                                    </div>
                                                    <div class="col-lg-9">
                                                        <input hidden class="form-check-input" type="number" min="1"
                                                               step="1" name="duration-selection"
                                                               id="duration-selection" required>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-3">
                                                        <label hidden class="form-check-label" id="set-selection-label"
                                                               for="set-selection">
                                                            Set Number
                                                        </label>
                                                    </div>
                                                    <div class="col-lg-3">
                                                        <input hidden class="form-check-input" type="number" min="1"
                                                               step="1" name="set-selection" id="set-selection"
                                                               required>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-3">
                                                        <label hidden class="form-check-label" id="rep-selection-label"
                                                               for="rep-selection">
                                                            Rep Number
                                                        </label>
                                                    </div>
                                                    <div class="col-lg-3">
                                                        <input hidden class="form-check-input" type="number"
                                                               name="rep-selection" id="rep-selection" required>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-default waves-effect"
                                                    data-dismiss="modal">Close
                                            </button>
                                            <button type="submit" id="add-button"
                                                    class="btn btn-success save-event waves-effect waves-light">Add
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal fade none-border" id="edit-profile-modal">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                                &times;
                                            </button>
                                            <h4 class="modal-title"><strong>Edit Profile</strong></h4>
                                        </div>
                                        <div class="modal-body">
                                            <div class="col-lg-12">
                                                <div class="row">
                                                    <div class="col-lg-6">
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="radio"
                                                                   name="exampleRadios" id="cardio-radio" value="0"
                                                                   required>
                                                            <label class="form-check-label" for="exampleRadios1">
                                                                Cardio Exercise
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6">
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="radio"
                                                                   name="exampleRadios" id="weight-radio" value="1"
                                                                   required>
                                                            <label class="form-check-label" for="exampleRadios2">
                                                                Weight Exercise
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="row">
                                                    <select class="js-example-basic-single" name="exercise_selection"
                                                            id="exercise-selector" style="width: 450px">
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="row">
                                                    <div class="col-lg-3">
                                                        <label hidden class="form-check-label"
                                                               id="duration-selection-label" for="duration-selection">
                                                            Duration
                                                        </label>
                                                    </div>
                                                    <div class="col-lg-9">
                                                        <input hidden class="form-check-input" type="number" min="1"
                                                               step="1" name="duration-selection"
                                                               id="duration-selection" required>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-3">
                                                        <label hidden class="form-check-label" id="set-selection-label"
                                                               for="set-selection">
                                                            Set Number
                                                        </label>
                                                    </div>
                                                    <div class="col-lg-3">
                                                        <input hidden class="form-check-input" type="number" min="1"
                                                               step="1" name="set-selection" id="set-selection"
                                                               required>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-3">
                                                        <label hidden class="form-check-label" id="rep-selection-label"
                                                               for="rep-selection">
                                                            Rep Number
                                                        </label>
                                                    </div>
                                                    <div class="col-lg-3">
                                                        <input hidden class="form-check-input" type="number"
                                                               name="rep-selection" id="rep-selection" required>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-default waves-effect"
                                                    data-dismiss="modal">Close
                                            </button>
                                            <button type="submit" id="add-button"
                                                    class="btn btn-success save-event waves-effect waves-light">Add
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> <!-- /.card-body -->
                    </div><!-- /.card -->
                </div>
                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="card-title box-title">Diet Program</h4>
                            <button type="submit" id="food_add_button" class="btn btn-success waves-effect waves-light"
                                    data-toggle="modal" data-target="#add-food-modal"><i
                                    class="fa fa-plus-square-o"></i> Add Food
                            </button>
                            <div class="card-content">
                                <div class="todo-list">
                                    <div class="tdl-holder">
                                        <div class="tdl-content">
                                            <ul id="food-checkbox-list">
                                                {% for user_food in daily_diet_program.userfood_set.all %}
                                                    <li>
                                                        <label>
                                                            <span><strong>{{ user_food.food.name }} | (x{{ user_food.portion }}) | {{ user_food.food.calorie }} cal taken</strong></span>
                                                            <a href='{{ user_food.food.recipe_link }}'
                                                               class="fa fa-pencil"></a>
                                                            <a href='#' class="fa fa-times" name="food"
                                                               val="{{ user_food.id }}"></a>
                                                        </label>
                                                    </li>
                                                {% endfor %}
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal fade none-border" id="add-food-modal">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                                &times;
                                            </button>
                                            <h4 class="modal-title"><strong>Add Food</strong></h4>
                                        </div>
                                        <div class="modal-body">
                                            <select class="food_selector" id="food-selector" style="width: 450px">
                                            </select>
                                            </label>
                                            <div class="col-lg-12">
                                                <div class="row">
                                                    <div class="col-lg-3">
                                                        <label hidden class="form-check-label" for="portion-selection"
                                                               id="portion-selection-label">
                                                            Portion
                                                        </label>
                                                    </div>
                                                    <div class="col-lg-9">
                                                        <input hidden class="form-check-input" type="number" min="1"
                                                               step="1" name="portion-selection" value="portion"
                                                               id="portion-selection">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-default waves-effect"
                                                    data-dismiss="modal">Close
                                            </button>
                                            <button type="button" id="add_food"
                                                    class="btn btn-success save-event waves-effect waves-light">Add
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div> <!-- /.card-body -->
                        </div><!-- /.card -->
                    </div>
                </div>
                <!-- Calender Chart Weather  -->
                <div class="row-no-gutters">
                    <div class="col-md-12 col-lg-4">
                        <div class="card">
                            <div class="card-body">
                                <div class="calender-cont widget-calender">
                                    <div id="calendar"></div>
                                </div>
                            </div>
                        </div><!-- /.card -->
                    </div>
                </div>
                <!-- /Calender Chart Weather -->


                <!-- /#add-category -->
            </div>
            <!-- .animated -->
        </div>
        <!-- /.content -->
        <!-- Scripts -->
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.4/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/jquery-match-height@0.7.2/dist/jquery.matchHeight.min.js"></script>
        <script src="{% static 'assets/js/main.js' %}"></script>

        <!--  Chart js -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.7.3/dist/Chart.bundle.min.js"></script>

        <!--Chartist Chart-->
        <script src="https://cdn.jsdelivr.net/npm/chartist@0.11.0/dist/chartist.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartist-plugin-legend@0.6.2/chartist-plugin-legend.min.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/jquery.flot@0.8.3/jquery.flot.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/flot-pie@1.0.0/src/jquery.flot.pie.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/flot-spline@0.0.1/js/jquery.flot.spline.min.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/simpleweather@3.1.0/jquery.simpleWeather.min.js"></script>
        <script src="{% static 'assets/js/init/weather-init.js' %}"></script>

        <script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/moment.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/fullcalendar@3.9.0/dist/fullcalendar.min.js"></script>
        <script src="{% static 'assets/js/init/fullcalendar-init.js' %}"></script>

        <!--Local Stuff-->
        <script>
            jQuery(document).ready(function ($) {
                "use strict";
                var fat_intake = {{ daily_person.daily_fat_intake }};
                var carb_intake = {{ daily_person.daily_carbohydrate_intake }};
                var protein_intake = {{ daily_person.daily_protein_intake }};
                draw_flot_pie(protein_intake,fat_intake,carb_intake);

                var daily_burned_calories = {{ daily_person.daily_burned_calories }};
                var daily_calorie_intakes = {{ daily_person.daily_calorie_intakes }};
                draw_cell_pai_chart(daily_burned_calories, daily_calorie_intakes);

                // Line Chart  #flotLine5
                var newCust = [[0, 3], [1, 5], [2, 4], [3, 7], [4, 9], [5, 3], [6, 6], [7, 4], [8, 10]];

                var plot = $.plot($('#flotLine5'), [{
                        data: newCust,
                        label: 'New Data Flow',
                        color: '#fff'
                    }],
                    {
                        series: {
                            lines: {
                                show: true,
                                lineColor: '#fff',
                                lineWidth: 2
                            },
                            points: {
                                show: true,
                                fill: true,
                                fillColor: "#ffffff",
                                symbol: "circle",
                                radius: 3
                            },
                            shadowSize: 0
                        },
                        points: {
                            show: true,
                        },
                        legend: {
                            show: false
                        },
                        grid: {
                            show: false
                        }
                    });
                // Line Chart  #flotLine5 End
                // Traffic Chart using chartist
                if ($('#traffic-chart').length) {
                    var chart = new Chartist.Line('#traffic-chart', {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        series: [
                            [0, 18000, 35000, 25000, 22000, 0],
                            [0, 33000, 15000, 20000, 15000, 300],
                            [0, 15000, 28000, 15000, 30000, 5000]
                        ]
                    }, {
                        low: 0,
                        showArea: true,
                        showLine: false,
                        showPoint: false,
                        fullWidth: true,
                        axisX: {
                            showGrid: true
                        }
                    });

                    chart.on('draw', function (data) {
                        if (data.type === 'line' || data.type === 'area') {
                            data.element.animate({
                                d: {
                                    begin: 2000 * data.index,
                                    dur: 2000,
                                    from: data.path.clone().scale(1, 0).translate(0, data.chartRect.height()).stringify(),
                                    to: data.path.clone().stringify(),
                                    easing: Chartist.Svg.Easing.easeOutQuint
                                }
                            });
                        }
                    });
                }
                // Traffic Chart using chartist End
                //Traffic chart chart-js
                if ($('#TrafficChart').length) {
                    var ctx = document.getElementById("TrafficChart");
                    ctx.height = 150;
                    var myChart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul"],
                            datasets: [
                                {
                                    label: "Visit",
                                    borderColor: "rgba(4, 73, 203,.09)",
                                    borderWidth: "1",
                                    backgroundColor: "rgba(4, 73, 203,.5)",
                                    data: [0, 2900, 5000, 3300, 6000, 3250, 0]
                                },
                                {
                                    label: "Bounce",
                                    borderColor: "rgba(245, 23, 66, 0.9)",
                                    borderWidth: "1",
                                    backgroundColor: "rgba(245, 23, 66,.5)",
                                    pointHighlightStroke: "rgba(245, 23, 66,.5)",
                                    data: [0, 4200, 4500, 1600, 4200, 1500, 4000]
                                },
                                {
                                    label: "Targeted",
                                    borderColor: "rgba(40, 169, 46, 0.9)",
                                    borderWidth: "1",
                                    backgroundColor: "rgba(40, 169, 46, .5)",
                                    pointHighlightStroke: "rgba(40, 169, 46,.5)",
                                    data: [1000, 5200, 3600, 2600, 4200, 5300, 0]
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            tooltips: {
                                mode: 'index',
                                intersect: false
                            },
                            hover: {
                                mode: 'nearest',
                                intersect: true
                            }

                        }
                    });
                }
                //Traffic chart chart-js  End

            });

            // add selected exercise to checkbox list.
            jQuery(document).ready(function ($) {
                $("#add-button").click(function () {
                    let exercise_name = $('.js-example-basic-single').select2('data')[0].text;
                    let exercise_id = $('.js-example-basic-single').select2('data')[0].id;
                    let daily_person_id = {{ daily_person.id }};
                    let daily_exercise_program_id = {{ daily_exercise_program.id }};
                    let duration = $('#duration-selection').val();
                    let set_number = $('#set-selection').val();
                    let rep_number = $('#rep-selection').val();
                    let user_exercise_id;
                    let how_many_calorie_burn = 0;
                    if (jQuery('#cardio-radio').is(':checked')) {
                        if (duration === '') {
                            alert('Please fill out duration field')
                        } else {
                            jQuery.ajax({
                                url: '/ajax/add_exercise/',
                                dataType: 'json',
                                data: {
                                    'exercise_type': 0,
                                    'exercise_id': exercise_id,
                                    'duration': duration,
                                    'daily_person_id': daily_person_id,
                                    'daily_exercise_program_id': daily_exercise_program_id,
                                    'csrfmiddlewaretoken': '{{ csrf_token }}',
                                },
                                type: 'POST',
                                success: function (data) {
                                    user_exercise_id = data.user_exercise_id;
                                    console.log(user_exercise_id);
                                    how_many_calorie_burn = Math.round(data.how_many_calorie_burn);
                                    jQuery('#daily_burned_calories').text(Math.round(data.daily_burned_calories));
                                    jQuery("#exercise-checkbox-list").append('<li> <label> <span><strong>' + exercise_name + "| " + duration + " min" + " | " + how_many_calorie_burn + " cal burned" + '<strong></span>\n <a href=\'#\'\n' +
                                        '                                                               class="fa fa-pencil"></a>\n' +
                                        '                                                            <a href=\'#\' val="user_exercise_id" class="fa fa-times"></a> </label> </li>');
                                    draw_cell_pai_chart(data.daily_burned_calorie, data.daily_calorie_intakes);
                                }
                            });
                            //jQuery("#exercise-checkbox-div").load(location.href + " #exercise-checkbox-div>*", "");
                        }
                    } else if (jQuery('#weight-radio').is(':checked')) {
                        if (set_number === '') {
                            alert('Please fill out set number field')
                        } else if (rep_number === '') {
                            alert('Please fill out rep number field')
                        } else {
                            jQuery.ajax({
                                url: '/ajax/add_exercise/',
                                dataType: 'json',
                                data: {
                                    'exercise_type': 1,
                                    'exercise_id': exercise_id,
                                    'set_number': set_number,
                                    'rep_number': rep_number,
                                    'daily_person_id': daily_person_id,
                                    'daily_exercise_program_id': daily_exercise_program_id,
                                    'csrfmiddlewaretoken': '{{ csrf_token }}',
                                },
                                type: 'POST',
                                success: function (data) {
                                    user_exercise_id = data.user_exercise_id;
                                    how_many_calorie_burn = Math.round(data.how_many_calorie_burn);
                                    jQuery('#daily_burned_calories').text(Math.round(data.daily_burned_calories));
                                    jQuery("#exercise-checkbox-list").append('<li> <label><span><strong>' + exercise_name + "| " + set_number + "x" + rep_number + " | " + how_many_calorie_burn + " cal burned" + '</strong></span>\n <a href=\'#\'\n' +
                                        '                                                               class="fa fa-pencil"></a>\n' +
                                        '                                                             <a href=\'#\' class="fa fa-times" name="exercise" val=user_exercise_id ></a>  </label> </li>');
                                    draw_cell_pai_chart(data.daily_burned_calories, data.daily_calorie_intakes);
                                }
                            });
                        }
                    }
                    jQuery('#add-exercise-modal').modal('hide');
                    alert('Exercise added successfully')
                });
            });

            // add selected food to checkbox list.
            jQuery(document).ready(function ($) {
                $("#add_food").click(function () {
                    let food_name = $('.food_selector').select2('data')[0].text;
                    let food_id = $('.food_selector').select2('data')[0].id;
                    let daily_person_id = {{ daily_person.id }};
                    let daily_diet_program_id = {{ daily_diet_program.id }};
                    let user_food_id;
                    let food_calorie;
                    let portion = $('#portion-selection').val();
                    let cell = jQuery('#cellPaiChart').data();
                    if (portion === '') {
                        alert('Please fill out portion field.')
                    } else {
                        jQuery.ajax({
                            url: '/ajax/add_food/',
                            dataType: 'json',
                            data: {
                                'food_id': food_id,
                                'portion': portion,
                                'daily_person_id': daily_person_id,
                                'daily_diet_program_id': daily_diet_program_id,
                                'csrfmiddlewaretoken': '{{ csrf_token }}',
                            },
                            type: 'POST',
                            success: function (data) {
                                jQuery('#daily_calorie_intakes').text(data.daily_calorie_intakes);
                                jQuery('#progress-bar-calorie-intakes').text('Intake: ' + Math.round(data.daily_calorie_intakes) + ' cal');
                                jQuery('#progress-bar-protein-intake').text('Intake:' + Math.round(data.daily_protein_intake) + ' cal');
                                jQuery('#progress-bar-fat-intake').text('Intake: ' + Math.round(data.daily_fat_intake) + ' cal');
                                jQuery('#progress-bar-carb-intake').text('Intake: ' + Math.round(data.daily_carbohydrate_intake) + ' cal');
                                user_food_id = data.user_food_id;
                                food_calorie = data.food_calorie;
                                jQuery("#food-checkbox-list").append('<li> <label> <span><strong>' + food_name + '| (x' + portion + ')' + ' | ' + food_calorie + ' cal taken' + '</strong></span>\n <a href=\'#\'\n' +
                                    '                                                               class="fa fa-pencil"></a>\n' +
                                    '                                                            <a href=\'#\' class="fa fa-times" name="food" val=user_food_id ></a> </label> </li>');
                                jQuery('#daily-calorie-intake-pbar').width(data.daily_calorie_intakes * 400 / {{ user.fitness_person_user.daily_required_calorie_intakes }});
                                jQuery('#daily-protein-intake-pbar').width(data.daily_protein_intake * 400 / {{ user.fitness_person_user.required_protein }});
                                jQuery('#daily-fat-pbar').width(data.daily_fat_intake * 400 / {{ user.fitness_person_user.required_fat }});
                                jQuery('#daily-carb-intake-pbar').width(data.daily_carbohydrate_intake * 400 / {{ user.fitness_person_user.required_carbohydrate }});
                                draw_flot_pie(data.daily_protein_intake, data.daily_fat_intake, data.daily_carbohydrate_intake);
                                draw_cell_pai_chart(data.daily_burned_calories, data.daily_calorie_intakes);
                            }
                        });
                        jQuery('#add-food-modal').modal('hide');
                        alert('Food added successfully');
                    }
                });
            });

            // shows appropriate data in food selection.
            jQuery(document).ready(function ($) {
                var loaded = false
                jQuery("#food_add_button").click(function () {
                    if (loaded === false) {
                        jQuery('#portion-selection').removeAttr('hidden');
                        jQuery('#portion-selection-label').removeAttr('hidden');
                        jQuery.ajax({
                            url: '/ajax/food_selection/',
                            dataType: 'json',
                            success: function (data) {
                                if (data.foods_to_show_in_selection) {
                                    jQuery('#food-selector').select2({
                                        maximumSelectionLength: 5,
                                        data: data.foods_to_show_in_selection,
                                    });
                                }
                                loaded = true
                            }
                        });
                    }
                });
            });

            // shows appropriate data in exercise selection.
            jQuery('.form-check-input').on('change', function ($) {
                if (jQuery('#weight-radio').is(':checked')) {
                    jQuery('#set-selection').removeAttr('hidden');
                    jQuery('#rep-selection').removeAttr('hidden');
                    jQuery('#set-selection-label').removeAttr('hidden');
                    jQuery('#rep-selection-label').removeAttr('hidden');
                    jQuery('#duration-selection').attr('hidden', 'hidden');
                    jQuery('#duration-selection-label').attr('hidden', 'hidden');
                    const exercise_type = jQuery('#weight-radio').val();
                    jQuery.ajax({
                        url: '/ajax/exercise_selection/',
                        data: {
                            'exercise_type': exercise_type
                        },
                        dataType: 'json',
                        success: function (data) {
                            if (data.exercises_to_show_in_selection) {
                                jQuery('#exercise-selector').empty();
                                jQuery('#exercise-selector').select2({
                                    maximumSelectionLength: 5,
                                    data: data.exercises_to_show_in_selection,
                                });
                            }
                        }
                    });

                } else if (jQuery('#cardio-radio').is(':checked')) {
                    jQuery('#duration-selection').removeAttr('hidden');
                    jQuery('#duration-selection-label').removeAttr('hidden');
                    jQuery('#set-selection').attr('hidden', 'hidden');
                    jQuery('#rep-selection').attr('hidden', 'hidden');
                    jQuery('#set-selection-label').attr('hidden', 'hidden');
                    jQuery('#rep-selection-label').attr('hidden', 'hidden');
                    const exercise_type = jQuery('#cardio-radio').val();
                    jQuery.ajax({
                        url: '/ajax/exercise_selection/',
                        data: {
                            'exercise_type': exercise_type
                        },
                        dataType: 'json',
                        success: function (data) {
                            if (data.exercises_to_show_in_selection) {
                                jQuery('#exercise-selector').empty();
                                jQuery('#exercise-selector').select2({
                                    maximumSelectionLength: 5,
                                    data: data.exercises_to_show_in_selection,
                                });
                            }
                        }
                    });
                }
            });

            // delete exercise or food.
            jQuery('.fa-times').on("click", (function () {
                console.log('buton goruldu');
                let daily_person_id = {{ daily_person.id }};
                let deleted_item_id = jQuery(this).attr('val');
                let type_of_data = jQuery(this).attr('name');
                if (type_of_data === 'exercise') {
                    jQuery.ajax({
                        url: '/ajax/delete_exercise/',
                        data: {
                            'user_exercise_id': deleted_item_id,
                            'daily_person_id': daily_person_id,
                            'csrfmiddlewaretoken': '{{ csrf_token }}',
                        },
                        dataType: 'json',
                        type: 'POST',
                        success: function (data) {
                            if (data) {
                                jQuery('#daily_burned_calories').text(data.daily_burned_calories);
                                alert(data.message);
                                draw_cell_pai_chart(data.daily_burned_calories, data.daily_calorie_intakes);
                            }
                        }
                    });
                    jQuery(this).closest('li').remove();

                } else if (type_of_data === 'food') {
                    jQuery.ajax({
                        url: '/ajax/delete_food/',
                        data: {
                            'user_food_id': deleted_item_id,
                            'daily_person_id': daily_person_id,
                            'csrfmiddlewaretoken': '{{ csrf_token }}',
                        },
                        dataType: 'json',
                        type: 'POST',
                        success: function (data) {
                            if (data) {
                                jQuery('#daily_calorie_intakes').text(data.daily_calorie_intakes);
                                jQuery('#progress-bar-calorie-intakes').text('Intake: ' + Math.round(data.daily_calorie_intakes) + ' cal');
                                jQuery('#progress-bar-protein-intake').text('Intake:' + Math.round(data.daily_protein_intake) + ' cal');
                                jQuery('#progress-bar-fat-intake').text('Intake: ' + Math.round(data.daily_fat_intake) + ' cal');
                                jQuery('#progress-bar-carb-intake').text('Intake: ' + Math.round(data.daily_carbohydrate_intake) + ' cal');
                                jQuery('#daily-calorie-intake-pbar').width(data.daily_calorie_intakes * 400 / {{ user.fitness_person_user.daily_required_calorie_intakes }});
                                jQuery('#daily-protein-intake-pbar').width(data.daily_protein_intake * 400 / {{ user.fitness_person_user.required_protein }});
                                jQuery('#daily-fat-pbar').width(data.daily_fat_intake * 400 / {{ user.fitness_person_user.required_fat }});
                                jQuery('#daily-carb-intake-pbar').width(data.daily_carbohydrate_intake * 400 / {{ user.fitness_person_user.required_carbohydrate }});
                                draw_cell_pai_chart(data.daily_burned_calories, data.daily_calorie_intakes);
                                draw_flot_pie(data.daily_protein_intake, data.daily_fat_intake, data.daily_carbohydrate_intake);
                                alert(data.message);
                            }
                        }
                    });
                    jQuery(this).closest('li').remove();
                }
            }));

            // handle edit profile functionality
            jQuery(document).ready(function ($) {
                jQuery('#edit-profile-save-button').click(function () {
                    let weight = jQuery('#weight-selection').val();
                    let purpose_of_use = jQuery('#purpose-of-use').val();
                    let fitness_person_id = {{ fitness_person.id }};
                    let daily_person_id = {{ daily_person.id }};
                    if (weight === '') {
                        alert('Please fill out weight field');
                    } else {
                        jQuery.ajax({
                            url: '/ajax/edit_fitness_profile/',
                            data: {
                                'weight': weight,
                                'purpose_of_use': purpose_of_use,
                                'fitness_person_id': fitness_person_id,
                                'daily_person_id': daily_person_id,
                                'csrfmiddlewaretoken': '{{ csrf_token }}',
                            },
                            dataType: 'json',
                            type: 'POST',
                            success: function (data) {
                                if (data) {
                                    jQuery('#fitness-user-weight').text(data.weight);
                                    jQuery('#body-fat-percentage').text('Body fat percentage: ' + data.body_fat_percentage.toFixed(2));
                                    jQuery('#body-mass-index').text('Body mass index: ' + data.body_mass_index.toFixed(2));
                                    jQuery('#recommended-calorie-intakes').text('Recommended: ' + Math.round(data.required_calorie_intakes) + ' cal');
                                    jQuery('#recommended-protein-intake').text('Recommended: ' + Math.round(data.required_protein_intake) + ' gr');
                                    jQuery('#recommended-fat-intake').text('Recommended: ' + Math.round(data.required_fat_intake) + ' gr');
                                    jQuery('#recommended-carbohydrate-intake').text('Recommended: ' + Math.round(data.required_carbohydrate_intake) + ' gr');
                                    jQuery('#daily-calorie-intake-pbar').width(({{ daily_person.daily_calorie_intakes }}) * 400 / data.required_calorie_intakes);
                                    jQuery('#daily-protein-intake-pbar').width(({{ daily_person.daily_protein_intake }}) * 400 / data.required_protein_intake);
                                    jQuery('#daily-fat-pbar').width(({{ daily_person.daily_fat_intake }}) * 400 / data.required_fat_intake);
                                    jQuery('#daily-carb-intake-pbar').width(({{ daily_person.daily_carbohydrate_intake }}) * 400 / data.required_carbohydrate_intake);
                                    alert(data.message);
                                }
                                jQuery('#edit-profile-modal').modal('hide');
                            }
                        });
                    }
                });
            });

            function draw_cell_pai_chart(daily_burned_calories, daily_calorie_intakes) {
                console.log('girdi');
                console.log(daily_burned_calories);
                console.log(daily_calorie_intakes);
                var cellPaiChart = [
                    {label: "Calorie Burned", data: [[1, daily_burned_calories]], color: '#5b83de'},
                    {label: "Calorie Intake", data: [[1, daily_calorie_intakes]], color: '#00bfa5'}
                ];

                jQuery.plot('#cellPaiChart', cellPaiChart, {
                    series: {
                        pie: {
                            show: true,
                            stroke: {
                                width: 0
                            }
                        }
                    },
                    legend: {
                        show: false
                    }, grid: {
                        hoverable: true,
                        clickable: true
                    }

                });
            }

            function draw_flot_pie(protein_intake, fat_intake, carb_intake) {
                // Pie chart flotPie1
                var piedata = [
                    {label: "Fat", data: [[1, fat_intake]], color: '#5c6bc0'},
                    {
                        label: "Carbohydrate",
                        data: [[1, carb_intake]],
                        color: '#ef5350'
                    },
                    {label: "Protein", data: [[1, protein_intake]], color: '#66bb6a'}
                ];

                jQuery.plot('#flotPie1', piedata, {
                    series: {
                        pie: {
                            show: true,
                            radius: 1,
                            innerRadius: 0.65,
                            label: {
                                show: true,
                                radius: 2 / 3,
                                threshold: 1
                            },
                            stroke: {
                                width: 0
                            }
                        }
                    },
                    grid: {
                        hoverable: true,
                        clickable: true
                    }
                });
                // Pie chart flotPie1  End
            }

        </script>
    </div>
{% endblock %}